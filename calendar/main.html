<!DOCTYPE html>
<html>
  <head>
    <title>Isaacs JavaScript Calender</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script>
      var date = new Date();
      y = date.getFullYear();
      m = date.getMonth();
      var firstDayOfTheMonth = new Date(y, m, 1);
      var lastDayOfTheMonth = new Date(y, m + 1, 0);
      var offset = firstDayOfTheMonth.getDay();
      var dayOnTheGrid = offset + date.getDate();

      ////

      function monthIncrement() {
        m++;
        dateIntegerExtractor(m);
      }

      ////

      function monthDecrement() {
        m--;
        dateIntegerExtractor(m);
      }

      ////

      function dateIntegerExtractor(m) {
        var firstDayOfTheMonth = new Date(y, m, 1);
        var lastDayOfTheMonth = new Date(y, m + 1, 0);
        var offset = firstDayOfTheMonth.getDay();
        var dayOnTheGrid = offset + date.getDate();
        var adjustableDate = new Date(2020, m);
        var month = adjustableDate.toLocaleString("default", { month: "long" });
        document.getElementById("month").innerHTML = month;
        calenderPopulator(
          m,
          dayOnTheGrid,
          firstDayOfTheMonth,
          lastDayOfTheMonth
        );
      }

      ////

      function initialPageLoad() {
        var date = new Date();
        m = date.getMonth();
        y = date.getFullYear();

        var monthsSinceChristBirth = y * 12 + 6;
        console.log(monthsSinceChristBirth);
        var currentYearNoMatterWhichOne = Math.floor(
          monthsSinceChristBirth / 12
        );
        console.log(currentYearNoMatterWhichOne);
        var monthWereIn = monthsSinceChristBirth % 12;
        console.log(monthWereIn);

        var firstDayOfTheMonth = new Date(
          currentYearNoMatterWhichOne,
          monthWereIn,
          1
        );
        var lastDayOfTheMonth = new Date(
          currentYearNoMatterWhichOne,
          monthWereIn + 1,
          0
        );
        console.log(lastDayOfTheMonth);
        var offset = firstDayOfTheMonth.getDay();
        console.log(firstDayOfTheMonth);
        console.log(offset);
        var dayOnTheGrid = offset + date.getDate();
        // y * 12 + month -1 = stuff    // -1 because months are 0-11
        // take the month * 0, mod 12 and then add 1 to the remainder to get the month number
        // offset = christnumber;
        dateIntegerExtractor();
        var weekDays = new Array(
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday"
        );
        for (i = 0; i <= 6; i++) {
          document.getElementById("ans").innerHTML = weekDays
            .map(
              (weekDay) =>
                `<div class="week-day-container" id=${weekDay}>${weekDay}</div>`
            )
            .join("");
        }
        var month = date.toLocaleString("default", { month: "long" });
        document.getElementById("month").innerHTML = month;
        calenderPopulator(
          m,
          dayOnTheGrid,
          firstDayOfTheMonth,
          lastDayOfTheMonth
        );
      }

      ////

      function calenderPopulator(
        m,
        dayOnTheGrid,
        firstDayOfTheMonth,
        lastDayOfTheMonth
      ) {
        var fixedTempOffset = 6;
        var date = new Date();
        currentMonth = date.getMonth();
        var ids = new Array();
        for (var i = 1; i <= 35; i++) {
          ids.push(i);
        }
        document.getElementById("griddies").innerHTML = ids
          .map((id) =>
            id == dayOnTheGrid && m == currentMonth
              ? `<div class="my-date" id=${
                  id - fixedTempOffset < 1 ? (id = null) : id - fixedTempOffset
                }>${
                  id - fixedTempOffset < 1 ||
                  id - fixedTempOffset > lastDayOfTheMonth.getDate()
                    ? (id = null)
                    : id - fixedTempOffset
                }</div>`
              : `<div class="grid-item" id=${
                  id - fixedTempOffset < 1 ? (id = null) : id - fixedTempOffset
                }>${
                  id - fixedTempOffset < 1 ||
                  id - fixedTempOffset > lastDayOfTheMonth.getDate()
                    ? (id = "")
                    : id - fixedTempOffset
                }</div>`
          )
          .join("");
      }

      ////

      window.onclick = (e) => {
        if (e.target.classList.contains("grid-item")) {
          document;
          e.target.classList.toggle("selected-square");
        }

        // console.log(e.target);
        // console.log(e.target.id, " -->", e.target.innerHTML);
      };

      ////

      document.onkeydown = function (e) {
        switch (e.keyCode) {
          case 37:
            str = "Left Key pressed!";
            monthDecrement();
            break;
          case 39:
            str = "Right Key pressed!";
            monthIncrement();
            break;
        }
      };
    </script>
  </head>
  <!-- ************************* -->
  <body onload="initialPageLoad()">
    <div class="header" id="month"></div>
    <div class="grid-container" id="ans"></div>
    <div class="grid-container" id="griddies"></div>
    <a href="#" class="previous round" onclick="monthDecrement()">&#8249;</a>
    <a href="#" class="next round" onclick="monthIncrement()">&#8250;</a>
    <button class="trigger">Click here to trigger the modal!</button>
    <div class="modal">
      <div class="modal-content">
        <span class="close-button">Ã—</span>
        <h1>Date and Time!</h1>
      </div>
    </div>
  </body>
  <!-- //Modal below// -->
  <script>
    var modal = document.querySelector(".modal");
    var trigger = document.querySelector(".trigger");
    var closeButton = document.querySelector(".close-button");

    function toggleModal() {
      modal.classList.toggle("show-modal");
    }

    function windowOnClick(event) {
      if (event.target === modal) {
        toggleModal();
      }
    }
    trigger.addEventListener("click", toggleModal);
    closeButton.addEventListener("click", toggleModal);
    window.addEventListener("click", windowOnClick);
  </script>
</html>

<!--     
             ,----------------,              ,---------,
        ,-----------------------,          ,"        ,"|
      ,"                      ,"|        ,"        ,"  |
     +-----------------------+  |      ,"        ,"    |
     |  .-----------------.  |  |     +---------+      |
     |  |                 |  |  |     | -==----'|      |
     |  |                 |  |  |     |         |      |
     |  |                 |  |  |/----|`---=    |      |
     |  |  C:\>_          |  |  |   ,/|==== ooo |      ;
     |  |                 |  |  |  // |(((( [33]|    ,"
     |  `-----------------'  |," .;'| |((((     |  ,"
     +-----------------------+  ;;  | |         |,"     
        /_)______________(_/  //'   | +---------+
   ___________________________/___  `,
  /  oooooooooooooooo  .o.  oooo /,   \,"-----------
 / ==ooooooooooooooo==.o.  ooo= //   ,`\--{)B     ,"
/_==__==========__==_ooo__ooo=_/'   /___________,"
`-----------------------------' -->
